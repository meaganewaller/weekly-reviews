---
layout: default
---

{% comment %}
  Load summary data from _data/dev_os/{summary_file}
  The summary_file frontmatter should be like "2026-02-23-summary.json"
{% endcomment %}
{% assign summary_key = page.summary_file | replace: ".json", "" %}
{% assign summary = site.data.dev_os[summary_key] %}

<article class="review">
  <!-- Header -->
  <header class="mb-8">
    <h1 class="text-2xl font-bold text-stone-800 dark:text-stone-100 mb-2">
      {{ page.title }}
    </h1>
    <p class="text-sm text-stone-500 dark:text-stone-400">
      <time datetime="{{ page.date | date: '%Y-%m-%d' }}">{{ page.date | date: "%B %-d, %Y" }}</time>
      {% if summary.week %}
      <span class="mx-2">|</span>
      <span>{{ summary.week.start }} to {{ summary.week.end }}</span>
      {% endif %}
    </p>
  </header>

  {% if summary %}
  <!-- Key Metrics Dashboard -->
  <section class="mb-8">
    <h2 class="text-lg font-semibold text-stone-700 dark:text-stone-200 mb-4 flex items-center gap-2">
      <span>Key Metrics</span>
    </h2>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
      <!-- Total Events -->
      <div class="bg-white dark:bg-stone-700 rounded-lg p-4 border border-stone-200 dark:border-stone-600">
        <div class="text-2xl font-bold text-blue-600 dark:text-blue-400">{{ summary.totals.events }}</div>
        <div class="text-xs text-stone-500 dark:text-stone-400 uppercase tracking-wide">Events</div>
      </div>
      <!-- Sessions -->
      <div class="bg-white dark:bg-stone-700 rounded-lg p-4 border border-stone-200 dark:border-stone-600">
        <div class="text-2xl font-bold text-green-600 dark:text-green-400">{{ summary.totals.sessions }}</div>
        <div class="text-xs text-stone-500 dark:text-stone-400 uppercase tracking-wide">Sessions</div>
      </div>
      <!-- Writes -->
      <div class="bg-white dark:bg-stone-700 rounded-lg p-4 border border-stone-200 dark:border-stone-600">
        <div class="text-2xl font-bold text-purple-600 dark:text-purple-400">{{ summary.totals.writes }}</div>
        <div class="text-xs text-stone-500 dark:text-stone-400 uppercase tracking-wide">Writes</div>
      </div>
      <!-- Files Modified -->
      <div class="bg-white dark:bg-stone-700 rounded-lg p-4 border border-stone-200 dark:border-stone-600">
        <div class="text-2xl font-bold text-orange-600 dark:text-orange-400">{{ summary.totals.files_modified }}</div>
        <div class="text-xs text-stone-500 dark:text-stone-400 uppercase tracking-wide">Files</div>
      </div>
    </div>
  </section>

  <!-- Health Indicators -->
  <section class="mb-8">
    <h2 class="text-lg font-semibold text-stone-700 dark:text-stone-200 mb-4">Health Indicators</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
      <!-- Failure Rate -->
      {% assign failure_pct = summary.derived_metrics.failure_rate | times: 100 | round: 1 %}
      <div class="bg-white dark:bg-stone-700 rounded-lg p-4 border border-stone-200 dark:border-stone-600">
        <div class="flex justify-between items-center mb-2">
          <span class="text-sm text-stone-600 dark:text-stone-300">Failure Rate</span>
          {% if failure_pct > 40 %}
          <span class="text-lg font-bold text-red-600 dark:text-red-400">{{ failure_pct }}%</span>
          {% elsif failure_pct > 20 %}
          <span class="text-lg font-bold text-yellow-600 dark:text-yellow-400">{{ failure_pct }}%</span>
          {% else %}
          <span class="text-lg font-bold text-green-600 dark:text-green-400">{{ failure_pct }}%</span>
          {% endif %}
        </div>
        <div class="w-full bg-stone-200 dark:bg-stone-600 rounded-full h-2">
          {% if failure_pct > 40 %}
          <div class="bg-red-500 h-2 rounded-full" style="width: {{ failure_pct }}%"></div>
          {% elsif failure_pct > 20 %}
          <div class="bg-yellow-500 h-2 rounded-full" style="width: {{ failure_pct }}%"></div>
          {% else %}
          <div class="bg-green-500 h-2 rounded-full" style="width: {{ failure_pct }}%"></div>
          {% endif %}
        </div>
        <div class="text-xs text-stone-400 mt-1">{{ summary.totals.failures }} failures / {{ summary.totals.events }} events</div>
      </div>

      <!-- Test Stability -->
      {% assign test_pct = summary.derived_metrics.test_stability_rate | times: 100 | round: 1 %}
      <div class="bg-white dark:bg-stone-700 rounded-lg p-4 border border-stone-200 dark:border-stone-600">
        <div class="flex justify-between items-center mb-2">
          <span class="text-sm text-stone-600 dark:text-stone-300">Test Stability</span>
          {% if test_pct > 90 %}
          <span class="text-lg font-bold text-green-600 dark:text-green-400">{{ test_pct }}%</span>
          {% elsif test_pct > 70 %}
          <span class="text-lg font-bold text-yellow-600 dark:text-yellow-400">{{ test_pct }}%</span>
          {% else %}
          <span class="text-lg font-bold text-red-600 dark:text-red-400">{{ test_pct }}%</span>
          {% endif %}
        </div>
        <div class="w-full bg-stone-200 dark:bg-stone-600 rounded-full h-2">
          {% if test_pct > 90 %}
          <div class="bg-green-500 h-2 rounded-full" style="width: {{ test_pct }}%"></div>
          {% elsif test_pct > 70 %}
          <div class="bg-yellow-500 h-2 rounded-full" style="width: {{ test_pct }}%"></div>
          {% else %}
          <div class="bg-red-500 h-2 rounded-full" style="width: {{ test_pct }}%"></div>
          {% endif %}
        </div>
        <div class="text-xs text-stone-400 mt-1">{{ summary.derived_metrics.test_runs_passed }} / {{ summary.totals.test_runs }} tests passed</div>
      </div>

      <!-- Documentation Rate -->
      {% if summary.totals.large_changes > 0 %}
        {% assign doc_pct = summary.totals.decisions_documented | times: 100.0 | divided_by: summary.totals.large_changes | round: 1 %}
      {% else %}
        {% assign doc_pct = 100 %}
      {% endif %}
      <div class="bg-white dark:bg-stone-700 rounded-lg p-4 border border-stone-200 dark:border-stone-600">
        <div class="flex justify-between items-center mb-2">
          <span class="text-sm text-stone-600 dark:text-stone-300">Tradeoffs Documented</span>
          {% if doc_pct > 50 %}
          <span class="text-lg font-bold text-green-600 dark:text-green-400">{{ doc_pct }}%</span>
          {% elsif doc_pct > 25 %}
          <span class="text-lg font-bold text-yellow-600 dark:text-yellow-400">{{ doc_pct }}%</span>
          {% else %}
          <span class="text-lg font-bold text-red-600 dark:text-red-400">{{ doc_pct }}%</span>
          {% endif %}
        </div>
        <div class="w-full bg-stone-200 dark:bg-stone-600 rounded-full h-2">
          {% if doc_pct > 50 %}
          <div class="bg-green-500 h-2 rounded-full" style="width: {{ doc_pct }}%"></div>
          {% elsif doc_pct > 25 %}
          <div class="bg-yellow-500 h-2 rounded-full" style="width: {{ doc_pct }}%"></div>
          {% else %}
          <div class="bg-red-500 h-2 rounded-full" style="width: {{ doc_pct }}%"></div>
          {% endif %}
        </div>
        <div class="text-xs text-stone-400 mt-1">{{ summary.totals.decisions_documented }} / {{ summary.totals.large_changes }} large changes</div>
      </div>
    </div>
  </section>

  <!-- Project Breakdown -->
  {% if summary.projects.size > 0 %}
  <section class="mb-8">
    <h2 class="text-lg font-semibold text-stone-700 dark:text-stone-200 mb-4">Projects</h2>
    <div class="space-y-3">
      {% for project in summary.projects %}
      <div class="bg-white dark:bg-stone-700 rounded-lg p-4 border border-stone-200 dark:border-stone-600">
        <div class="flex justify-between items-center mb-2">
          <span class="font-medium text-stone-700 dark:text-stone-200">{{ project.project }}</span>
          <span class="text-sm text-stone-500">{{ project.sessions }} sessions</span>
        </div>
        <div class="grid grid-cols-4 gap-2 text-center text-xs">
          <div>
            <div class="font-semibold text-stone-700 dark:text-stone-200">{{ project.events }}</div>
            <div class="text-stone-400">events</div>
          </div>
          <div>
            <div class="font-semibold text-green-600 dark:text-green-400">{{ project.writes }}</div>
            <div class="text-stone-400">writes</div>
          </div>
          <div>
            <div class="font-semibold text-red-600 dark:text-red-400">{{ project.failures }}</div>
            <div class="text-stone-400">failures</div>
          </div>
          <div>
            <div class="font-semibold text-blue-600 dark:text-blue-400">{{ project.tradeoffs }}</div>
            <div class="text-stone-400">tradeoffs</div>
          </div>
        </div>
        <!-- Progress bar showing event distribution -->
        {% assign pct = project.events | times: 100.0 | divided_by: summary.totals.events %}
        <div class="mt-2 w-full bg-stone-200 dark:bg-stone-600 rounded-full h-1">
          <div class="bg-blue-500 h-1 rounded-full" style="width: {{ pct }}%"></div>
        </div>
      </div>
      {% endfor %}
    </div>
  </section>
  {% endif %}

  <!-- Friction Summary -->
  {% if summary.top_friction_domains.size > 0 %}
  <section class="mb-8">
    <h2 class="text-lg font-semibold text-stone-700 dark:text-stone-200 mb-4">Top Friction Domains</h2>
    <div class="bg-white dark:bg-stone-700 rounded-lg p-4 border border-stone-200 dark:border-stone-600">
      {% assign max_friction = summary.top_friction_domains[0].count %}
      {% for domain in summary.top_friction_domains %}
      <div class="mb-3 last:mb-0">
        <div class="flex justify-between text-sm mb-1">
          <span class="text-stone-600 dark:text-stone-300 font-medium">{{ domain.domain }}</span>
          <span class="text-stone-500">{{ domain.count }}</span>
        </div>
        {% assign width = domain.count | times: 100.0 | divided_by: max_friction %}
        <div class="w-full bg-stone-200 dark:bg-stone-600 rounded-full h-2">
          <div class="bg-red-400 h-2 rounded-full" style="width: {{ width }}%"></div>
        </div>
      </div>
      {% endfor %}
    </div>
  </section>
  {% endif %}

  <!-- Principles Invoked -->
  {% if summary.top_principles_invoked.size > 0 %}
  <section class="mb-8">
    <h2 class="text-lg font-semibold text-stone-700 dark:text-stone-200 mb-4">Principles Invoked</h2>
    <div class="flex flex-wrap gap-2">
      {% for principle in summary.top_principles_invoked %}
      <span class="inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200">
        {{ principle.principle }}
        <span class="bg-blue-200 dark:bg-blue-800 px-1.5 py-0.5 rounded-full text-xs">{{ principle.count }}</span>
      </span>
      {% endfor %}
    </div>
  </section>
  {% endif %}

  <!-- Skills Used -->
  {% if summary.top_skills_used.size > 0 %}
  <section class="mb-8">
    <h2 class="text-lg font-semibold text-stone-700 dark:text-stone-200 mb-4">Skills Demonstrated</h2>
    <div class="flex flex-wrap gap-2">
      {% for skill in summary.top_skills_used %}
      <span class="inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200">
        {{ skill.skill }}
        <span class="bg-green-200 dark:bg-green-800 px-1.5 py-0.5 rounded-full text-xs">{{ skill.count }}</span>
      </span>
      {% endfor %}
    </div>
  </section>
  {% endif %}

  {% endif %}

  <!-- Markdown Content -->
  <section class="prose prose-stone dark:prose-invert prose-sm max-w-none
                  prose-headings:font-semibold prose-headings:text-stone-800 dark:prose-headings:text-stone-100
                  prose-h2:text-lg prose-h2:mt-8 prose-h2:mb-4 prose-h2:pb-2 prose-h2:border-b prose-h2:border-stone-200 dark:prose-h2:border-stone-600
                  prose-h3:text-base prose-h3:mt-6
                  prose-p:text-stone-600 dark:prose-p:text-stone-300
                  prose-li:text-stone-600 dark:prose-li:text-stone-300
                  prose-strong:text-stone-700 dark:prose-strong:text-stone-200
                  prose-a:text-blue-600 dark:prose-a:text-blue-400
                  prose-code:text-xs prose-code:py-0.5 prose-code:rounded
                  prose-table:text-xs
                  prose-img:rounded-lg prose-img:shadow-md">
    {{ content }}
  </section>

  <!-- Footer -->
  <footer class="mt-8 pt-4 border-t border-stone-200 dark:border-stone-600">
    <p class="text-xs text-stone-400 dark:text-stone-500">
      {% if summary.week.generated_at %}
      Generated at {{ summary.week.generated_at | date: "%Y-%m-%d %H:%M" }} UTC
      {% endif %}
    </p>
  </footer>
</article>
